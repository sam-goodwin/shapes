(()=>{"use strict";class e{props;constructor(e){this.props="string"==typeof e?{kind:e}:e,Object.assign(this,e)}clone(e){return new this.constructor({...this,...e})}describe(e){return this.clone({description:e})}optional(){return t.union(this,t.undefined())}nullable(){return t.union(this,t.null())}nullish(){return t.union(this,t.null(),t.undefined())}extend(e){return"class"===this.kind?t.class({...this.shape,...e},this):t.object({...this.shape,...e})}merge(e){return this.extend(e.shape)}pick(e,...t){return this.pickOrOmit("string"==typeof e?[e,...t]:e,!0)}omit(e,...t){return this.pickOrOmit("string"==typeof e?[e,...t]:e,!1)}pickOrOmit(e,n){const r=new Set(Array.isArray(e)?e:Object.keys(e)),i=Object.fromEntries(Object.entries(this.shape).filter((([e])=>n?r.has(e):!r.has(e))));return"class"===this.kind?t.class(i):t.object(i)}partial(){const e={};for(const[n,r]of Object.entries(this.shape))e[n]=t.union(r,t.undefined());return"class"===this.kind?t.class(e):t.object(e)}deepPartial(){const e=this;if("class"===this.kind||"object"===this.kind){const n={};for(const[r,i]of Object.entries(e.shape))n[r]=t.union(i,t.undefined());return"class"===this.kind?t.class(n):t.object(n)}return"array"===this.kind?t.array(e.item.deepPartial()):t.union(e,t.undefined())}keyof(){if("class"===this.kind||"object"===this.kind)return t.enum(...Object.keys(this.shape))}parse(e,n){const r=this.kind;if("object"===r||"class"===r){const n=this;if("object"!=typeof e||null===e)throw new Error("Expected an object");const i={};for(const[r,s]of Object.entries(n.shape))if(r in e)i[r]=s.parse(e[r],this);else if(!t.isUndefined(s)){if(t.isUnion(s)&&s.options.some(t.isUndefined))continue;throw new Error(`Expected ${r} in object`)}return"class"===r?new this(i):i}if(typeof e===r)return e;if("any"===r||"unknown"===r)return e;if("never"===r)throw new Error("Received never");if("void"===r){if(void 0!==e)throw new Error("Expected void");return e}if("bigint"===r&&"number"==typeof e)return BigInt(e);if("literal"===r){if(this.value!==e)throw new Error("Expected a literal");return e}if("this"===r){if(void 0===n)throw new Error("this is undefined");return n.parse(e,n)}if("array"===r){if(!Array.isArray(e))throw new Error("Expected an array");return e.map((e=>this.item.parse(e,n)))}if("union"===r||"enum"===r||"nativeEnum"===r){const t=this;for(const i of t.options)if("enum"===r||"nativeEnum"===r){if(i===e)return e}else try{return i.parse(e,n)}catch(e){}throw new Error("Expected one of the union options")}throw new Error(`Unsupported type ${r.toString()}`)}}const t=function t(n){return new Proxy({},{get:(r,i)=>"string"==typeof i&&i.startsWith("is")?e=>e&&("object"==typeof e||"function"==typeof e)&&e.kind===i.slice(2).toLowerCase():"coerce"===i?()=>t({...n,coerce:!0}):"describe"===i?e=>t({...n,description:e}):(...t)=>{const r={...n,kind:i,args:t};"union"===i?r.options=t:"enum"===i?(r.options=t,r.enum=Object.fromEntries(t.map((e=>[e,e])))):"nativeEnum"===i?(r.options=Object.values(t[0]),r.enum=t[0]):"literal"===i?r.value=t[0]:"array"===i?r.item=t[0]:"object"!==i&&"class"!==i||(r.shape=t[0]);const s=new e(r);if("class"!==i)return s;{const n=t[1]??class{constructor(e){Object.assign(this,e)}};Object.assign(n,s);for(const t of Object.getOwnPropertyNames(e.prototype)){const e=s[t];"function"==typeof e&&"constructor"!==t&&Object.defineProperty(n,t,{value:e})}return n}}})}({}),n=t;var r=n.object({name:n.string(),age:n.number()}).parse({name:"Alice",age:30});console.log(r)})();